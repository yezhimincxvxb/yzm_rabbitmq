# 简介
```text
延时队列,队列内部是有序的，最重要的特性就体现在它的延时属性上，延时队列中的元素是希望在指定时间到了以后或之前取出和处理，
简单来说，延时队列就是用来存放需要在指定时间被处理的元素的队列。
```
# 应用场景
```text
延迟队列使用场景
1.订单在十分钟之内未支付则自动取消
2.新创建的店铺，如果在十天内都没有上传过商品，则自动发送消息提醒.
3.用户注册成功后，如果三天内没有登陆则进行短信提醒。
4.用户发起退款，如果三天内没有得到处理则通知相关运营人员。
5.预定会议后，需要在预定的时间点前十分钟通知各个与会人员参加会议
```
# 问题：由队列设置过期时间，增加不同过期策略需重新添加队列
# 问题2：
```text
如果使用在消息属性上设置 TTL 的方式，消息可能并不会按时“死亡“，因为 RabbitMQ 只会检查第一个消息是否过期，
如果过期则丢到死信队列,如果第一个消息的延时时长很长，而第二个消息的延时时长很短，第二个消息并不会优先得到执行
```
# 安装延时插件
```text
在官网上下载https://www.rabbitmq.com/community-plugins.html，
下载rabbitmq_delayed_message_exchange插件，然后解压放置到 RabbitMQ的插件目录
进入 RabbitMQ的安装目录下的目录：/usr/lib/rabbitmq/lib/rabbitmq-server-3.8.8/plugins
执行命令让该插件生效：rabbitmq-plugins enable rabbitmq_delayed_message_exchange
最后重启 RabbitMQ
```